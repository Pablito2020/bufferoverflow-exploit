CC=gcc
CFLAGS=-z execstack -ggdb -mpreferred-stack-boundary=2 -fomit-frame-pointer -fno-stack-protector -Os -fno-builtin-printf
INFO_FLAGS=-pedantic -Wall 

all: code exploit

code: code.c
	$(CC) $(CFLAGS) -o $@ $^

exploit: exploit.c
	$(CC) $(INFO_FLAGS) -o $@ $^

install: all
	chown root code
	chmod u+s code
	echo "0" > /proc/sys/kernel/randomize_va_space
	echo "0" > /proc/sys/kernel/exec-shield

clean:
	rm -rf code exploit
